<h1>Create From</h1>
<h1>Create Form</h1>
<form id="createCategoryForm">
    <div>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" />
    </div>
    <div>
        <label for="description">Description:</label>
        <input type="text" id="description" name="description" />
    </div>
    <div>
        <button type="submit">Create</button>
    </div>
</form>
@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#createCategoryForm').submit(function (e) {
                e.preventDefault(); // Prevent default form submission

                var category = {
                    name: $('#name').val(),
                    description: $('#description').val()
                };

                $.ajax({
                    url: 'https://localhost:7251/api/Ctegories',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(category),
                    success: function () {
                        window.location.href = '/usingajax/Index';
                        // Optionally, redirect or clear the form
                        $('#createCategoryForm')[0].reset();
                    },
                    error: function () {
                        alert('Failed to create category.');
                    }
                });
            });
        });
    </script>
}
